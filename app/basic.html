<!doctype html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Example</title>

    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Web Application Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Web Starter Kit">
    <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Web Starter Kit">
    <link rel="apple-touch-icon" href="images/touch/apple-touch-icon.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#2F3BA2">

    <!-- Color the status bar on mobile devices -->
    <meta name="theme-color" content="#2F3BA2">

    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="http://www.example.com/">
    -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.2.0/lodash.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.css"/>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>

<div class="container">

    <!-- Template for select type item -->
    <script type="text/template" id="title-list">
        <% for(var i = 0; i < items.length; i++) { %>
            <div class="list-titles-item">
                <div class="inline-block">
                    <%-items[i].title%>
                </div>

                <div class="inline-block">
                    <select class="field-select" data-field="<%-items[i].id%>" data-title="<%-items[i].title%>">
                        <option>Select your option</option>
                        <%for(var j = 0; j < options.length; j++) { %>
                            <option data-index="<%-j%>"><%-options[j]%></option>
                        <% } %>
                    </select>
                </div>

            </div>
        <% } %>
    </script>

    <!-- Template for table -->
    <script type="text/template" id="table-list">
        <table id="customUserTableFromCSV" class="table" data-component="table-custom">
            <thead>
                <tr>
                    <%for(var i = 0; i < title.length; i++) { %>
                        <th><%-title[i].title%></th>
                    <% } %>
                    <th>
                        Edit/Remove
                    </th>
                </tr>
            </thead>

            <tbody>
                <%for(var i = 0; i < data.length; i++) { %>
                    <tr data-index="<%-i%>">
                        <%for(var value in data[i]) { %>
                            <%if(value === "index") continue;%>
                            <td><%-data[i][value]%></td>
                        <% } %>
                        <td>
                            <button class="btn btn-primary" data-table-custom="edit-row" data-component="dialog" type="button">Edit</button>
                            <button class="btn btn-primary" data-table-custom="delete-row" type="button">Remove</button>
                        </td>
                    </tr>
                <% } %>
            </tbody>
        </table>

    </script>

    <!-- Template for table row -->
    <script type="text/template" id="table-row">
        <%for(var i = 0; i < data.length; i++) { %>
        <tr data-index="<%-i%>">
            <%for(var value in data[i]) { %>
            <%if(value === "index") continue;%>
            <td><%-data[i][value]%></td>
            <% } %>
            <td>
                <button class="btn btn-primary" data-table-custom="edit-row" data-component="dialog" type="button">Edit</button>
                <button class="btn btn-primary" data-table-custom="delete-row" type="button">Remove</button>
            </td>
        </tr>
        <% } %>
    </script>

    <!-- Template for edit dialog row -->
    <script type="text/template" id="dialog-edit-row">
        <h3>Edit Row Data</h3>

        <dl>
        <%for(var i = 0; i < data.length; i++) {%>
            <%for(var value in data[i]) { %>
                <dt><%-value%></dt>
                <dd contenteditable="true"><%-data[i][value]%></dd>
            <% } %>
        <% } %>
        </dl>
    </script>

    <div data-component="userUploadCSVFile">
        <label for="uploadFile">Add new list users</label>
        <input type="file" name="uploadFile" id="uploadFile"/>

        <br/>

        <div class="btn-group">
            <button id="renderTable" class="btn btn-primary" type="button" >Render Table</button>
            <button  id="submitData" class="btn btn-primary" type="button">Submit</button>
        </div>

        <br/>

    </div>

    <table class="table" data-component="table-custom">
        <thead>
        <tr>
            <th>Имя</th>
            <th>Фамилия</th>
            <th>Edit/Remove</th>
        </tr>
        </thead>

        <tbody>
            <tr data-index="0">
                <td>Юрий</td>
                <td>Березовский</td>
                <td>
                    <button class="btn btn-primary" data-table-custom="edit-row" data-component="dialog" type="button">Edit</button>
                    <button id="lol" class="btn btn-primary" data-table-custom="delete-row" type="button">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>

</div>

<script src="scripts/parseCSVFile.js"></script>
<script src="scripts/table-custom.js"></script>
<script src="scripts/dialog.js"></script>

<script type="text/javascript">
    "use strict";
    let inst = new addCSVList({
        "componentRoot": document.querySelector("[data-component='userUploadCSVFile']"),
        "btnFile": document.getElementById("uploadFile"),
        "btnRenderTable": document.getElementById("renderTable"),
        "btnSubmit": document.getElementById("submitData"),
        "typeFields": [
            {
                "id": "name",
                "title": "Имя"
            },
            {
                "id": "lname",
                "title": "Фамилия"
            },
            {
                "id": "email",
                "title": "Почтовый адресс"
            },
            {
                "id": "index",
                "title": "Индекс"
            },
            {
                "id": "phoneNumber",
                "title": "Номер Телефона"
            }
        ]
    });

    let customTbl = new TableCustom();

    let dialog = new Dialog(
        {
            "component": "dialog",
            "templateId": "dialog-edit-row"
        }
    );
</script>
<!-- Built with love using Web Starter Kit -->
</body>
</html>
